version: 2.1

orbs:
  win: circleci/windows@5.0.0

jobs:
  build:
    executor:
      name: win/default
    steps:
    - checkout
    - run: "go version"
    - run:
         command: echo hello && echo $PATH
         shell: bash.exe
    - run:
          name: Install MinGW
          command: choco install -y mingw
    - run:
          name: Add MinGW to PATH
          command: |
            $env:Path += ";C:\tools\mingw64\bin"
            [Environment]::SetEnvironmentVariable("Path", $env:Path, [System.EnvironmentVariableTarget]::Machine)
    - run:
         command: g++ --version
         shell: bash.exe

workflows:
  main:
    jobs:
    - build